# ComicForge

[English](README.en.md) | ä¸­æ–‡

AI é©±åŠ¨çš„å°è¯´åˆ›ä½œä¸å¯è§†åŒ–å·¥å…·ï¼šå¯¹è¯ã€ç»˜å›¾ã€æ¨¡å‹å…ƒæ•°æ®ï¼Œä¸€ä½“åŒ–å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚

## âœ¨ åŠŸèƒ½æ¦‚è§ˆ

### ğŸ¤– AI å¯¹è¯ç³»ç»Ÿ
- **å¤šæä¾›å•†æ”¯æŒ**ï¼šOpenAI / xAI (Grok) / Ollama / Anthropic (Claude) / Google (Gemini) / è‡ªå®šä¹‰ç«¯ç‚¹
- **æµå¼è¾“å‡º**ï¼šå®æ—¶æ˜¾ç¤º AI å“åº”ï¼Œæ”¯æŒ Markdown æ¸²æŸ“
- **ä¼šè¯ç®¡ç†**ï¼šå¤šä¼šè¯æ”¯æŒï¼Œä¼šè¯å†å²æŒä¹…åŒ–
- **å·¥å…·è°ƒç”¨**ï¼šé›†æˆ 40+ ä¸ª MCP å·¥å…·å‡½æ•°ï¼Œæ”¯æŒï¼š
  - ä¼šè¯ç®¡ç†ï¼ˆåˆ›å»ºã€æ›´æ–°ã€çŠ¶æ€ç®¡ç†ï¼‰
  - è§’è‰²ç®¡ç†ï¼ˆåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€ç«‹ç»˜ç”Ÿæˆï¼‰
  - è®°å¿†ç®¡ç†ï¼ˆåˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤ï¼‰
  - å°è¯´å†…å®¹è¯»å–ï¼ˆå•è¡Œã€æ‰¹é‡ã€ç« èŠ‚ã€æ‘˜è¦ï¼‰
  - å›¾åƒç”Ÿæˆï¼ˆSD-Forge æœ¬åœ°ç”Ÿæˆï¼‰
  - è¿­ä»£æ¨¡å¼ï¼ˆæ‰¹é‡å¤„ç†ç« èŠ‚å†…å®¹ï¼‰
- **å¼€å‘è€…æ¨¡å¼**ï¼šçªç ´æ¨¡å‹é™åˆ¶ï¼Œæ”¯æŒè‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯
- **è¶…æ—¶æ§åˆ¶**ï¼šå¯é…ç½®çš„ç½‘ç»œè¯·æ±‚è¶…æ—¶æ—¶é—´

### ğŸ¨ å›¾åƒç”Ÿæˆ
- **æœ¬åœ°ç”Ÿæˆ**ï¼šå¯¹æ¥ SD-Forge/sd-webuiï¼Œæ”¯æŒ LoRA/æ¨¡å‹åˆ‡æ¢
- **Civitai é›†æˆ**ï¼šæ”¯æŒä» Civitai å¯¼å…¥æ¨¡å‹å…ƒæ•°æ®ï¼ˆAIR æ ‡è¯†ç¬¦ï¼‰
- **ç»“æœç®¡ç†**ï¼šæŒ‰ä¼šè¯/æ‰¹æ¬¡ä¿å­˜ç”Ÿæˆçš„å›¾åƒ

### ğŸ“¦ æ¨¡å‹å…ƒæ•°æ®ç®¡ç†
- **æœ¬åœ°æ‰«æ**ï¼šè‡ªåŠ¨æ‰«ææœ¬åœ° Checkpoint/LoRA æ¨¡å‹
- **Civitai é›†æˆ**ï¼šæŠ“å–æ¨¡å‹ç¤ºä¾‹å›¾ã€å‚æ•°ã€æè¿°ç­‰ä¿¡æ¯
- **ç­›é€‰åŠŸèƒ½**ï¼šæŒ‰ç”Ÿæ€ç³»ç»Ÿï¼ˆSD1/SD2/SDXLï¼‰å’ŒåŸºç¡€æ¨¡å‹ç­›é€‰
- **å…ƒæ•°æ®ç¼“å­˜**ï¼šæœ¬åœ°ç¼“å­˜æ¨¡å‹å…ƒæ•°æ®ï¼Œæ”¯æŒç¦»çº¿æŸ¥çœ‹

### ğŸ‘¥ è§’è‰²ï¼ˆActorï¼‰ç®¡ç†
- **è§’è‰²åˆ›å»º**ï¼šæ”¯æŒåˆ›å»ºè§’è‰²ã€åœ°ç‚¹ã€ç»„ç»‡ç­‰å®ä½“
- **æ ‡ç­¾ç³»ç»Ÿ**ï¼šé¢„å®šä¹‰æ ‡ç­¾ï¼ˆå¤–è§‚ã€æœè£…ã€æ€§æ ¼ã€èƒŒæ™¯ç­‰ï¼‰
- **ç¤ºä¾‹å›¾ç®¡ç†**ï¼šä¸ºè§’è‰²æ·»åŠ å¤šå¼ ç¤ºä¾‹å›¾
- **ç«‹ç»˜ç”Ÿæˆ**ï¼šè‡ªåŠ¨ä¸ºè§’è‰²ç”Ÿæˆ AI ç«‹ç»˜ï¼ˆä½¿ç”¨ SD-Forgeï¼‰
- **é¢œè‰²æ ‡è¯†**ï¼šæ¯ä¸ªè§’è‰²æ”¯æŒè‡ªå®šä¹‰é¢œè‰²æ ‡è¯†

### ğŸ§  è®°å¿†ç®¡ç†
- **é”®å€¼å­˜å‚¨**ï¼šåŸºäºé”®å€¼å¯¹çš„è®°å¿†æ¡ç›®ç®¡ç†
- **é¢„å®šä¹‰é”®**ï¼šæä¾›å¸¸ç”¨é”®çš„æè¿°å’Œå»ºè®®
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡åˆ é™¤ä¼šè¯çš„æ‰€æœ‰è®°å¿†

### ğŸ“– å°è¯´å†…å®¹ç®¡ç†
- **å†…å®¹è¯»å–**ï¼šæ”¯æŒå•è¡Œã€æ‰¹é‡ã€ç« èŠ‚èŒƒå›´è¯»å–
- **ç« èŠ‚ç®¡ç†**ï¼šç« èŠ‚åˆ—è¡¨ã€æ‘˜è¦ã€è¿›åº¦è·Ÿè¸ª
- **è¿­ä»£æ¨¡å¼**ï¼šæ‰¹é‡å¤„ç†ç« èŠ‚å†…å®¹ï¼Œæ”¯æŒè‡ªå®šä¹‰æ­¥é•¿å’ŒèŒƒå›´
- **æ®µè½å¯¼èˆª**ï¼šä¾¿æ·çš„å‰åæ®µè½åˆ‡æ¢

### âš™ï¸ è®¾ç½®ä¸é…ç½®
- **å¯è§†åŒ–é…ç½®**ï¼šå›¾å½¢ç•Œé¢é…ç½®æ‰€æœ‰è®¾ç½®é¡¹
- **è‡ªåŠ¨ä¿å­˜**ï¼šé…ç½®ä¿®æ”¹è‡ªåŠ¨ä¿å­˜åˆ° `config.json`
- **ç¯å¢ƒå˜é‡æ”¯æŒ**ï¼šä¼˜å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®
- **å“åº”å¼å¸ƒå±€**ï¼šæ”¯æŒä¸åŒçª—å£å°ºå¯¸çš„è‡ªé€‚åº”å¸ƒå±€

## ğŸ—‚ ç›®å½•ç»“æ„

```
ComicForge/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                   # åç«¯ FastAPI æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ routers/           # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ project.py     # é¡¹ç›®ç®¡ç†è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ actor.py       # è§’è‰²ç®¡ç†è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ memory.py      # è®°å¿†ç®¡ç†è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ reader.py      # å†…å®¹è¯»å–è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ novel.py       # å°è¯´å†…å®¹è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ draw.py        # å›¾åƒç”Ÿæˆè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ llm.py         # LLM è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.py        # èŠå¤©è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ history.py     # å†å²è®°å½•è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ file.py        # æ–‡ä»¶è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ db/            # æ•°æ®åº“æœåŠ¡ï¼ˆSQLModelï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project_service.py   # é¡¹ç›®ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ actor_service.py     # è§’è‰²ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ memory_service.py    # è®°å¿†ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ novel_service.py     # å°è¯´å†…å®¹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ draw_service.py      # ç»˜å›¾æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ history_service.py   # å†å²è®°å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ llm/           # LLM æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base.py    # æŠ½è±¡åŸºç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ openai.py  # OpenAI å…¼å®¹ï¼ˆxAI/OpenAI/Anthropic/Googleï¼‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ollama.py  # Ollama æœ¬åœ°æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ draw/          # ç»˜å›¾æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sd_forge.py    # SD-Forge æœ¬åœ°ç”Ÿæˆ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ civitai.py     # Civitai äº‘ç«¯ç”Ÿæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ model_meta/    # æ¨¡å‹å…ƒæ•°æ®æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ local.py   # æœ¬åœ°æ¨¡å‹æ‰«æ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ civitai.py # Civitai å…ƒæ•°æ®è·å–
â”‚   â”‚   â”‚   â””â”€â”€ chat.py        # èŠå¤©æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ schemas/           # Pydantic æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ project.py
â”‚   â”‚   â”‚   â”œâ”€â”€ actor.py
â”‚   â”‚   â”‚   â”œâ”€â”€ memory.py
â”‚   â”‚   â”‚   â”œâ”€â”€ novel.py
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.py
â”‚   â”‚   â”‚   â””â”€â”€ draw.py
â”‚   â”‚   â”œâ”€â”€ constants/         # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ llm.py         # LLM æä¾›å•†ã€æ¨¡å‹åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ actor.py       # è§’è‰²æ ‡ç­¾å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ memory.py      # è®°å¿†é”®å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ model_meta.py  # æ¨¡å‹å…ƒæ•°æ®å¸¸é‡
â”‚   â”‚   â”œâ”€â”€ settings/          # é…ç½®è®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ llm_setting.py      # LLM é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ draw_setting.py     # ç»˜å›¾é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ sd_forge_setting.py # SD-Forge é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ civitai_setting.py  # Civitai é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ ui_setting.py       # UI é…ç½®
â”‚   â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚       â”œâ”€â”€ path.py        # è·¯å¾„å·¥å…·
â”‚   â”‚       â”œâ”€â”€ download.py    # ä¸‹è½½å·¥å…·
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ App.vue                # Vue æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.ts                # å‰ç«¯å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ components/            # Vue ç»„ä»¶
â”‚   â””â”€â”€ style.css              # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ storage/                   # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ database.db        # SQLite æ•°æ®åº“
â”‚       â”œâ”€â”€ chat_history/      # èŠå¤©å†å²ï¼ˆJSONï¼‰
â”‚       â”œâ”€â”€ model_meta/        # æ¨¡å‹å…ƒæ•°æ®ç¼“å­˜
â”‚       â””â”€â”€ projects/          # é¡¹ç›®æ•°æ®ï¼ˆå›¾åƒç­‰ï¼‰
â”‚
â”œâ”€â”€ config.json                # é…ç½®æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ package.json               # å‰ç«¯ä¾èµ–é…ç½®
â”œâ”€â”€ pyproject.toml             # åç«¯ä¾èµ–é…ç½®
â”œâ”€â”€ vite.config.ts             # Vite é…ç½®
â””â”€â”€ tsconfig.json              # TypeScript é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js**: 18+ (ç”¨äºå‰ç«¯)
- **Python**: 3.13+ (ç”¨äºåç«¯)
- **å¯é€‰**: SD-Forge/sd-webuiï¼ˆç”¨äºæœ¬åœ°å›¾åƒç”Ÿæˆï¼‰

### å®‰è£…ä¾èµ–

#### åç«¯ä¾èµ–

```bash
# ä½¿ç”¨ uvï¼ˆæ¨èï¼‰
uv sync

# æˆ–ä½¿ç”¨ pip
pip install -r requirements.txt
```

#### å‰ç«¯ä¾èµ–

```bash
# ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm install

# æˆ–ä½¿ç”¨ npm
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

### è¿è¡Œåº”ç”¨

#### å¯åŠ¨åç«¯æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡è½½ï¼‰- åŸºç¡€ç‰ˆæœ¬
uv run uvicorn api.main:app --reload --host 127.0.0.1 --port 7864 --app-dir src

# å¼€å‘æ¨¡å¼ï¼ˆä¼˜åŒ–é‡è½½é€Ÿåº¦ï¼‰- æ¨è
# Windows
scripts\dev-server.bat

# Linux/Mac
chmod +x scripts/dev-server.sh
./scripts/dev-server.sh

# æˆ–ä½¿ç”¨ Python è„šæœ¬ï¼ˆè·¨å¹³å°ï¼‰
python scripts/dev-server.py

# ç”Ÿäº§æ¨¡å¼
uv run uvicorn api.main:app --host 127.0.0.1 --port 7864 --app-dir src
```

**ä¼˜åŒ–é‡è½½è¯´æ˜**ï¼š
- é»˜è®¤çš„ `--reload` ä¼šç›‘å¬æ‰€æœ‰æ–‡ä»¶å˜åŒ–ï¼Œå¯¼è‡´é‡è½½è¾ƒæ…¢
- ä¼˜åŒ–ç‰ˆæœ¬åªç›‘å¬ `src/api` ç›®å½•ï¼Œæ’é™¤ `__pycache__`ã€`storage`ã€`tests`ã€`desperate`ã€`resources` ç­‰ä¸éœ€è¦çš„ç›®å½•
- è¿™æ ·å¯ä»¥æ˜¾è‘—æé«˜é‡è½½é€Ÿåº¦

åç«¯ API æ–‡æ¡£ï¼š
- **Swagger UI**: http://127.0.0.1:7864/docs
- **ReDoc**: http://127.0.0.1:7864/redoc

#### å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼
pnpm dev

# æˆ–ä½¿ç”¨ npm
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# é¢„è§ˆç”Ÿäº§æ„å»º
pnpm preview
```

å‰ç«¯é»˜è®¤è¿è¡Œåœ¨ï¼šhttp://127.0.0.1:7863

**æ³¨æ„**ï¼šéœ€è¦åŒæ—¶è¿è¡Œå‰ç«¯å’Œåç«¯æœåŠ¡æ‰èƒ½æ­£å¸¸ä½¿ç”¨åº”ç”¨ã€‚

### é…ç½®

#### æ–¹å¼ä¸€ï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰

```bash
# Windows PowerShell
$env:OPENAI_API_KEY = "sk-..."
$env:XAI_API_KEY = "xai-..."
$env:CIVITAI_API_TOKEN = "..."

# Linux/macOS
export OPENAI_API_KEY="sk-..."
export XAI_API_KEY="xai-..."
export CIVITAI_API_TOKEN="..."
```

#### æ–¹å¼äºŒï¼šåº”ç”¨å†…è®¾ç½®

å¯åŠ¨åº”ç”¨åï¼Œåœ¨å‰ç«¯ç•Œé¢çš„"è®¾ç½®"é¡µé¢ä¸­é…ç½®ï¼š
- æä¾›å•†é€‰æ‹©ï¼ˆOpenAI / xAI / Ollama / Anthropic / Google / è‡ªå®šä¹‰ï¼‰
- API Key
- Base URL
- æ¨¡å‹åç§°
- Temperature
- è¯·æ±‚è¶…æ—¶æ—¶é—´

#### æ–¹å¼ä¸‰ï¼šé…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºæˆ–ç¼–è¾‘ `config.json`ï¼š

```json
{
  "llm": {
    "provider": "xai",
    "api_key": "xai-...",
    "base_url": "https://api.x.ai/v1",
    "model": "grok-4-fast-reasoning",
    "temperature": 0.7,
    "timeout": 60.0,
    "developer_mode": true
  },
  "sd_forge": {
    "base_url": "http://127.0.0.1:7860",
    "home": "C:\\path\\to\\sd-webui-forge",
    "timeout": 30.0,
    "generate_timeout": 300.0
  },
  "civitai": {
    "api_token": "optional-token",
    "timeout": 30.0
  },
  "ui": {
    "ecosystem_filter": null,
    "base_model_filter": null,
    "privacy_mode": true
  }
}
```

**é…ç½®ä¼˜å…ˆçº§**ï¼šç¯å¢ƒå˜é‡ > é…ç½®æ–‡ä»¶ > é»˜è®¤å€¼

## ğŸ”Œ API æœåŠ¡

ComicForge æä¾› FastAPI å®ç°çš„ RESTful API æœåŠ¡ï¼Œå‰ç«¯é€šè¿‡ HTTP API è®¿é—®æ‰€æœ‰åŠŸèƒ½ã€‚

### ä¸»è¦è·¯ç”±

- `/project/*` - é¡¹ç›®ç®¡ç†
- `/actor/*` - è§’è‰²ç®¡ç†
- `/memory/*` - è®°å¿†ç®¡ç†
- `/reader/*` - å†…å®¹è¯»å–
- `/novel/*` - å°è¯´å†…å®¹
- `/draw/*` - å›¾åƒç”Ÿæˆ
- `/llm/*` - LLM ç›¸å…³åŠŸèƒ½
- `/chat/*` - èŠå¤©å¯¹è¯
- `/history/*` - å†å²è®°å½•
- `/file/*` - æ–‡ä»¶æœåŠ¡

## ğŸ›  ä¸»è¦åŠŸèƒ½è¯¦è§£

### AI å¯¹è¯

- **æµå¼è¾“å‡º**ï¼šå®æ—¶æ˜¾ç¤º AI å“åº”ï¼Œæ”¯æŒ Markdown æ ¼å¼
- **ä¼šè¯å†å²**ï¼šè‡ªåŠ¨ä¿å­˜å¯¹è¯å†å²ï¼Œæ”¯æŒå¤šä¼šè¯åˆ‡æ¢
- **å·¥å…·è°ƒç”¨**ï¼šAI å¯ä»¥è°ƒç”¨ 40+ ä¸ªå·¥å…·å‡½æ•°æ‰§è¡Œå®é™…æ“ä½œ
- **é‡æ–°ç¼–è¾‘**ï¼šæ”¯æŒé‡æ–°ç¼–è¾‘å·²å‘é€çš„æ¶ˆæ¯
- **è¿­ä»£æ¨¡å¼**ï¼šæ‰¹é‡å¤„ç†ç« èŠ‚å†…å®¹ï¼Œæ”¯æŒè‡ªå®šä¹‰èŒƒå›´

### è§’è‰²ç®¡ç†

- **åˆ›å»ºè§’è‰²**ï¼šè®¾ç½®åç§°ã€æè¿°ã€é¢œè‰²ã€æ ‡ç­¾
- **æ ‡ç­¾ç³»ç»Ÿ**ï¼šé¢„å®šä¹‰æ ‡ç­¾åˆ†ç±»ï¼ˆå¤–è§‚ã€æœè£…ã€æ€§æ ¼ã€èƒŒæ™¯ã€æ€§åˆ«ç­‰ï¼‰
- **ç¤ºä¾‹å›¾**ï¼šä¸ºè§’è‰²æ·»åŠ å¤šå¼ ç¤ºä¾‹å›¾
- **ç«‹ç»˜ç”Ÿæˆ**ï¼šä½¿ç”¨ SD-Forge è‡ªåŠ¨ç”Ÿæˆç«‹ç»˜
- **å³é”®åˆ é™¤**ï¼šæ”¯æŒå³é”®åˆ é™¤è§’è‰²

### è®°å¿†ç®¡ç†

- **é”®å€¼å­˜å‚¨**ï¼šåŸºäºé”®å€¼å¯¹çš„è®°å¿†æ¡ç›®
- **é¢„å®šä¹‰é”®**ï¼šæä¾›å¸¸ç”¨é”®çš„æè¿°å’Œå»ºè®®
- **æ‰¹é‡åˆ é™¤**ï¼šæ”¯æŒæ‰¹é‡åˆ é™¤ä¼šè¯çš„æ‰€æœ‰è®°å¿†

### æ¨¡å‹ç®¡ç†

- **æœ¬åœ°æ‰«æ**ï¼šè‡ªåŠ¨æ‰«ææœ¬åœ° Checkpoint/LoRA æ¨¡å‹
- **Civitai å¯¼å…¥**ï¼šé€šè¿‡ AIR æ ‡è¯†ç¬¦å¯¼å…¥æ¨¡å‹å…ƒæ•°æ®
- **ç­›é€‰åŠŸèƒ½**ï¼šæŒ‰ç”Ÿæ€ç³»ç»Ÿå’ŒåŸºç¡€æ¨¡å‹ç­›é€‰
- **ä¸€é”®æ‰“å¼€**ï¼šä¸€é”®åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ‰€æœ‰æ¨¡å‹çš„ç½‘é¡µé“¾æ¥

## ğŸ“ å¼€å‘è¯´æ˜

### æŠ€æœ¯æ ˆ

#### å‰ç«¯
- **æ„å»ºå·¥å…·**: Vite
- **æ¡†æ¶**: Vue 3 + TypeScript
- **UI æ¡†æ¶**: Tailwind CSS + Headless UI + shadcn/ui
- **çŠ¶æ€ç®¡ç†**: Pinia
- **HTTP å®¢æˆ·ç«¯**: Axios
- **ç±»å‹ç³»ç»Ÿ**: TypeScript

#### åç«¯
- **Web æ¡†æ¶**: FastAPI
- **æ•°æ®åº“**: SQLite (SQLModel)
- **LLM é›†æˆ**: LangChain
- **HTTP å®¢æˆ·ç«¯**: httpx
- **æ•°æ®éªŒè¯**: Pydantic
- **å¼‚æ­¥æ”¯æŒ**: asyncio

### é¡¹ç›®ç‰¹ç‚¹

- **å‰åç«¯åˆ†ç¦»**ï¼šæ¸…æ™°çš„æ¶æ„åˆ†ç¦»ï¼Œä¾¿äºå¼€å‘å’Œç»´æŠ¤
- **ç±»å‹å®‰å…¨**ï¼šå‰åç«¯å…¨é¢ä½¿ç”¨ç±»å‹æç¤ºï¼ˆTypeScript + Pythonï¼‰
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„åˆ†å±‚æ¶æ„
- **å¼‚æ­¥æ”¯æŒ**ï¼šåç«¯ä½¿ç”¨ async/await å¤„ç†å¼‚æ­¥æ“ä½œ
- **å“åº”å¼å¸ƒå±€**ï¼šå‰ç«¯æ”¯æŒä¸åŒå±å¹•å°ºå¯¸çš„è‡ªé€‚åº”å¸ƒå±€
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- **API æ–‡æ¡£**ï¼šè‡ªåŠ¨ç”Ÿæˆçš„ Swagger/OpenAPI æ–‡æ¡£

## ğŸ§ª æµ‹è¯•

### åç«¯æµ‹è¯•

é¡¹ç›®ä½¿ç”¨ `pytest` å’Œ FastAPI çš„ `TestClient` è¿›è¡Œåç«¯ API æµ‹è¯•ã€‚

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
uv run pytest tests/

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
uv run pytest tests/api/test_chat.py

# è¿è¡Œæµ‹è¯•å¹¶æ˜¾ç¤ºè¯¦ç»†è¾“å‡º
uv run pytest tests/api/test_chat.py -v

# è¿è¡Œæµ‹è¯•å¹¶æ˜¾ç¤ºè¦†ç›–ç‡
uv run pytest tests/ --cov=src/api --cov-report=html
```

### æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ api/                    # API æµ‹è¯•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_chat.py        # èŠå¤©å¯¹è¯ API æµ‹è¯•
â”œâ”€â”€ sd_forge/               # SD-Forge ç›¸å…³æµ‹è¯•
â””â”€â”€ ...
```

### æµ‹è¯•ç¤ºä¾‹

æµ‹è¯•ä½¿ç”¨ FastAPI çš„ `TestClient`ï¼Œæ— éœ€å¯åŠ¨å®é™…æœåŠ¡å™¨ï¼š

```python
from fastapi.testclient import TestClient
from api.main import app

client = TestClient(app)

def test_root_endpoint():
    response = client.get("/")
    assert response.status_code == 200
    assert response.json()["name"] == "ComicForge API"

def test_chat_stream():
    response = client.post(
        "/chat/stream",
        json={
            "message": "ä½ å¥½",
            "project_id": "test-project"
        }
    )
    assert response.status_code in [200, 500, 502]  # å¯èƒ½æ˜¯æˆåŠŸæˆ–æœåŠ¡é”™è¯¯
```

### æµ‹è¯•è¦†ç›–çš„åŠŸèƒ½

- âœ… æ ¹ç«¯ç‚¹å’Œå¥åº·æ£€æŸ¥
- âœ… æµå¼å¯¹è¯ç«¯ç‚¹ï¼ˆ`/chat/stream`ï¼‰
- âœ… è¿­ä»£å¼å¯¹è¯ç«¯ç‚¹ï¼ˆ`/chat/iteration`ï¼‰
- âœ… æ¶ˆæ¯çŠ¶æ€æŸ¥è¯¢ï¼ˆ`/chat/status/{message_id}`ï¼‰
- âœ… å†å²è®°å½• CRUD æ“ä½œ
- âœ… è¯·æ±‚éªŒè¯å’Œé”™è¯¯å¤„ç†

### æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“**ï¼šæµ‹è¯•ä¼šè‡ªåŠ¨åˆå§‹åŒ–æ•°æ®åº“ï¼Œæµ‹è¯•æ•°æ®ä¼šå†™å…¥å®é™…æ•°æ®åº“æ–‡ä»¶
2. **LLM æœåŠ¡**ï¼šæµ‹è¯•ä¸éªŒè¯ LLM å®é™…è°ƒç”¨ï¼ˆéœ€è¦ API å¯†é’¥ï¼‰ï¼Œä»…éªŒè¯ç«¯ç‚¹å¯è®¿é—®æ€§
3. **ä¾èµ–**ï¼š`httpx` å·²åŒ…å«åœ¨ `pyproject.toml` ä¸­ï¼ˆTestClient éœ€è¦ï¼‰

### ç¼–å†™æ–°æµ‹è¯•

åˆ›å»ºæ–°çš„æµ‹è¯•æ–‡ä»¶æ—¶ï¼Œéµå¾ªä»¥ä¸‹æ¨¡å¼ï¼š

```python
import pytest
from fastapi.testclient import TestClient
from api.main import app

@pytest.fixture
def client():
    return TestClient(app)

def test_your_endpoint(client):
    response = client.get("/your-endpoint")
    assert response.status_code == 200
```

## ğŸ“„ è®¸å¯è¯

è§ [LICENSE](LICENSE)
