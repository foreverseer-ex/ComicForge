# 页面 UI 设计文档

根据 README 和旧版设计，整理各页面的 UI 元素需求。

## 1. 主页（HomeView / page.tsx）

### UI 元素：
1. **项目选择器**
   - 顶部下拉选择器，显示当前项目
   - 支持切换项目
   - 显示项目名称和描述

2. **项目信息卡片**
   - 项目名称、描述
   - 统计信息：总行数、章节数、角色数、记忆数
   - 进度跟踪：当前章节游标

3. **小说段落展示区域**
   - 按章节分组显示段落
   - 每个段落显示：
     - 行号/段落编号
     - 文本内容
     - 关联的图片（如果有）
     - 操作按钮：编辑、绑定图片、开始迭代等
   - 支持滚动浏览
   - 支持前后段落导航

4. **图片展示**
   - 与段落关联的图片以缩略图形式显示
   - 点击可预览大图
   - 支持图片画廊模式（键盘导航 ←/→）

5. **操作按钮**
   - 创建新项目
   - 上传文件
   - 快速操作（开始迭代、清空图片等）

## 2. 角色管理页（ActorView / actor/page.tsx）

### UI 元素：
1. **角色列表**
   - 网格布局（卡片形式）
   - 每个角色卡片显示：
     - 角色名称
     - 颜色标识（圆形色块）
     - 描述（简短）
     - 标签（多个标签，不同颜色）
     - 示例图（第一张作为缩略图，支持隐私模式）
     - 操作按钮：编辑、删除、生成立绘

2. **创建/编辑角色对话框**
   - 名称输入
   - 描述输入（多行）
   - 颜色选择器
   - 标签选择（多选，预定义标签分类）
   - 示例图管理（添加、删除、排序）
   - 立绘生成选项

3. **立绘生成对话框**
   - 模式选择：创建新任务 / 选择已有任务
   - 绘图参数配置
   - ControlNet 设置（可选）
   - 预览和确认

4. **筛选和搜索**
   - 按项目筛选
   - 按标签筛选
   - 搜索框（按名称搜索）
   - 模板切换（显示所有角色 / 仅模板）

5. **批量操作**
   - 全选
   - 批量删除

## 3. 内容管理页（ContentView / content/page.tsx）

### UI 元素：
1. **项目选择器**
   - 顶部下拉选择器

2. **章节导航**
   - 左侧或顶部章节列表
   - 显示章节编号和标题
   - 显示每个章节的行数
   - 当前章节高亮

3. **内容编辑区域**
   - 段落列表（按章节分组）
   - 每个段落显示：
     - 行号
     - 文本内容（可编辑）
     - 关联图片（如果有）
     - 操作按钮：编辑、删除、绑定图片
   - 支持行级编辑（内联编辑）
   - 支持批量操作

4. **文件上传**
   - 上传按钮
   - 拖拽上传支持
   - 上传进度显示
   - 支持格式：txt/pdf/doc/docx/md

5. **统计信息**
   - 总行数
   - 总章节数
   - 有图片的章节数
   - 显示在顶部或侧边栏

6. **操作按钮**
   - 上传文件
   - 批量编辑
   - 导出内容

## 4. 任务管理页（TaskView / task/page.tsx）

### UI 元素：
1. **任务列表**
   - 列表或卡片布局
   - 每个任务显示：
     - 任务名称
     - 描述
     - 状态（pending/running/completed/error）
     - 进度条（进行中的任务）
     - Job ID
     - 创建时间
     - 结果图片（缩略图，如果有）
     - 操作按钮：查看详情、删除、下载图片

2. **状态筛选**
   - 按状态筛选（全部/等待中/进行中/已完成/失败）
   - 按来源筛选（single/batch）
   - 按角色筛选
   - 按模型筛选

3. **批量操作**
   - 全选
   - 批量删除
   - 清空所有任务

4. **段落迭代控制**
   - 开始迭代按钮
   - 停止迭代按钮
   - 清空本段所有图片按钮
   - 显示当前迭代状态

5. **图片预览对话框**
   - 图片画廊模式
   - 键盘导航（←/→）
   - 缩放功能
   - 下载按钮

6. **实时刷新**
   - 自动刷新进行中的任务（每3秒）
   - 手动刷新按钮

## 5. 聊天页（ChatView / chat/page.tsx）

### UI 元素：
1. **消息列表**
   - 滚动区域
   - 每条消息显示：
     - 角色标识（user/assistant/system）
     - 消息内容（支持 Markdown 渲染）
     - 代码高亮（如果有代码块）
     - 工具调用显示（如果有）
     - 建议按钮（如果有 suggests）
     - 状态标识（pending/ready/error）
     - 操作按钮：重新编辑、删除

2. **输入区域**
   - 文本输入框（多行）
   - 发送按钮
   - 模式选择：invoke / stream
   - 迭代模式开关

3. **工具调用显示**
   - 折叠/展开工具调用详情
   - 显示工具名称和参数
   - 显示工具返回结果

4. **建议显示**
   - 如果有 suggests，显示为按钮
   - 点击建议自动填充到输入框

5. **项目选择器**
   - 顶部显示当前项目
   - 支持切换项目

## 6. 记忆管理页（MemoryView / memory/page.tsx）

### UI 元素：
1. **记忆列表**
   - 卡片或列表布局
   - 每个记忆显示：
     - 键（key）
     - 值（value）
     - 描述（如果有）
     - 操作按钮：编辑、删除

2. **创建/编辑记忆对话框**
   - 键输入（支持预定义键选择）
   - 值输入（多行）
   - 键描述显示（如果是预定义键）

3. **预定义键查询**
   - 显示所有预定义键及其描述
   - 支持搜索

4. **批量操作**
   - 批量删除（清空当前项目的所有记忆）

5. **项目筛选**
   - 按项目筛选记忆

## 7. 模型管理页（ModelView / model/page.tsx）

### UI 元素：
1. **模型列表**
   - 网格布局（卡片形式）
   - 每个模型卡片显示：
     - 模型名称
     - 类型（Checkpoint/LoRA）
     - 生态系统（SD1/SD2/SDXL）
     - 基础模型
     - 示例图片（支持隐私模式）
     - 喜爱标记（星标）
     - 操作按钮：查看详情、标记喜爱、打开链接

2. **筛选功能**
   - 按生态系统筛选
   - 按基础模型筛选
   - 按类型筛选（Checkpoint/LoRA）
   - 按喜爱筛选（仅显示喜爱的模型）
   - 搜索框（按名称搜索）

3. **模型详情对话框**
   - 完整模型信息
   - 示例图片画廊
   - 参数信息
   - 描述和标签

4. **批量操作**
   - 一键打开所有模型的网页链接
   - 批量导入（Civitai）

5. **扫描和导入**
   - 本地扫描按钮
   - Civitai 导入按钮（支持批量导入）

## 8. 设置页（SettingsView / settings/page.tsx）

### UI 元素：
1. **设置分类**
   - LLM 设置
   - 绘图设置
   - SD-Forge 设置
   - Civitai 设置
   - 前端设置
   - ControlNet 配置
   - 调试设置

2. **每个设置分类包含：**
   - 相关配置项（输入框、选择器、开关等）
   - 测试连接按钮（如果适用）
   - 保存按钮

3. **外观设置**
   - 主题切换（浅色/深色）
   - 隐私模式开关

## 9. 帮助页（HelpView / help/page.tsx）

### UI 元素：
1. **工具说明列表**
   - 39 个工具函数的说明
   - 分类显示（读取工具 / 写入工具）
   - 每个工具显示：
     - 工具名称
     - 描述
     - 参数说明
     - 返回值说明
     - 使用示例

2. **使用指南**
   - 快速开始
   - 常见问题
   - 最佳实践

## 通用 UI 元素

1. **项目选择器组件**
   - 下拉选择器
   - 显示项目列表
   - 当前项目高亮
   - 支持创建新项目

2. **图片显示组件**
   - 支持哈希值显示图片
   - 加载状态
   - 错误重试（最多3次）
   - 隐私模式支持
   - 点击预览大图

3. **加载状态**
   - 骨架屏
   - 进度指示器
   - 加载中提示

4. **错误提示**
   - Toast 通知
   - 错误对话框
   - 空状态提示

5. **确认对话框**
   - 删除确认
   - 操作确认
